import{a as C}from"./chunk-SDPCKNEL.js";import{A as a,B as c,C as l,Fa as v,I as u,c as r,ga as p,ka as d,p as i,q as s,r as m,xa as h,za as f}from"./chunk-EPBCWZJQ.js";import"./chunk-GAL4ENT6.js";var n=(()=>{let _CompilerComponent=class _CompilerComponent{constructor(t,e,o){this._commandService=t,this._form=e,this._router=o,this.isQuestion=this._router.url.includes("/question/"),this.formDoc=this._form.getForm("docForm",{formId:"docForm",title:"",components:[{name:"Text",key:"code",class:"codeBlock",disabled:!!this.isQuestion,fields:[{name:"Placeholder",value:"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0432\u0430\u0448 \u043A\u043E\u0434..."},{name:"Label",value:"\u0412\u0432\u0435\u0434\u0435\u043D\u043D\u044F"},{name:"Textarea",value:!0}]},{name:"Button",fields:[{name:"Label",value:"\u0417\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u0438"},{name:"Submit",value:!0},{name:"Click",value:()=>{this.compile()}}]},{name:"Text",key:"output",hidden:this.isQuestion,class:"codeBlock",disabled:!0,fields:[{name:"Placeholder",value:"\u0422\u0443\u0442 \u0431\u0443\u0434\u0435 \u0432\u0430\u0448 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442..."},{name:"Label",value:"\u0412\u0438\u0432\u0435\u0434\u0435\u043D\u043D\u044F"},{name:"Textarea",value:!0}]},{name:"Text",key:"answer",hidden:!this.isQuestion,class:"codeBlock wrong",fields:[{name:"Placeholder",value:"\u041D\u0430\u043F\u0438\u0448\u0456\u0442\u044C \u0442\u0443\u0442 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442..."},{name:"Label",value:"\u0412\u0438\u0432\u0435\u0434\u0435\u043D\u043D\u044F"},{name:"Textarea",value:!0}]}]}),this.submition={code:"",answer:"",output:""},this._router.url.includes("/command/")?(this.submition.code=this._commandService.getExample(Number(this._router.url.replace("/compiler/command/",""))),this.compile(!0)):this._router.url.includes("/question/")&&(this.submition.code=this._commandService.getQuestion(Number(this._router.url.replace("/compiler/question/",""))),this.compile(!0))}compile(skipAlert=!1){this.submition.output="";let print=t=>{this.submition.output+=this._commandService.translateErrorMessage(t)+`
`};try{let code=`(()=>{${this._commandService.translate(this.submition.code)}})()`;eval(skipAlert?code.split(`
`).filter(t=>!t.includes("alert(")).join(`
`):code)}catch(t){this.submition.output="\u041F\u043E\u043C\u0438\u043B\u043A\u0430 \u0432 \u043A\u043E\u0434\u0456: "+this._commandService.translateErrorMessage(t.message)}}testAnswer(){this.isQuestion&&(this.formDoc.components[3].class=this.submition.output.trim()===this.submition.answer.trim()?"right":"wrong")}back(){window.history.back()}};_CompilerComponent.\u0275fac=function(e){return new(e||_CompilerComponent)(i(C),i(f),i(p))},_CompilerComponent.\u0275cmp=s({type:_CompilerComponent,selectors:[["ng-component"]],standalone:!1,decls:1,vars:2,consts:[[1,"compiler-wrapper",3,"wChange","submition","config"]],template:function(e,o){e&1&&(c(0,"wform",0),u("wChange",function(){return o.testAnswer()}),l()),e&2&&a("submition",o.submition)("config",o.formDoc)},dependencies:[h],encapsulation:2});let CompilerComponent=_CompilerComponent;return CompilerComponent})();var _=[{path:"",component:n},{path:"command/:id",component:n},{path:"question/:id",component:n}],I=(()=>{let e=class e{};e.\u0275fac=function(g){return new(g||e)},e.\u0275mod=m({type:e}),e.\u0275inj=r({imports:[d.forChild(_),v]});let t=e;return t})();export{I as CompilerModule};
