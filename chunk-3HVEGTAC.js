import{a as V}from"./chunk-RIMNUKFJ.js";import{a as B}from"./chunk-SDPCKNEL.js";import{A as l,B as u,Ba as N,C as m,D as j,Da as P,Fa as R,H as L,I as p,J as f,O as _,R as E,S as H,_ as M,c as C,f as q,g as S,ga as Q,ha as U,k as g,ka as $,m as c,p as s,q as b,r as x,s as y,v as I,w as F,x as k,y as w,z as T,za as D}from"./chunk-EPBCWZJQ.js";import{a as v,b as h,g as z}from"./chunk-GAL4ENT6.js";function K(i,e){if(i&1){let r=L();u(0,"button",3),p("click",function(){q(r);let n=f();return S(n.add())}),_(1,"\u041D\u043E\u0432\u0438\u0439 \u043A\u0432\u0456\u0437"),m()}}function O(i,e){if(i&1&&j(0,"div",6),i&2){let r=f().$implicit;l("innerHtml",r.description,g)}}function W(i,e){if(i&1&&(u(0,"div",2)(1,"div",4),_(2),m(),y(3,O,1,1,"div",5),m()),i&2){let r=e.$implicit,t=e.$index;l("routerLink",H("/quiz/",r._id)),c(2),E("",t+1,". ",r.name),c(),l("ngIf",r.description)}}var A=(()=>{let e=class e{constructor(t,n,o,a,d){this.classService=t,this._quizService=n,this._commandService=o,this._form=a,this._router=d,this.quizzes=[],this._quizCreationForm=this._form.getForm("quizCreationForm",{formId:"quizCreationForm",title:"\u0424\u043E\u0440\u043C\u0430 \u0441\u0442\u0432\u043E\u0440\u0435\u043D\u043D\u044F \u0432\u0456\u043A\u0442\u043E\u0440\u0438\u043D\u0438",components:[{name:"Select",key:"quiz",fields:[{name:"Placeholder",value:"\u041E\u0431\u0435\u0440\u0456\u0442\u044C \u0433\u043E\u0442\u043E\u0432\u0443 \u0432\u0456\u043A\u0442\u043E\u0440\u0438\u043D\u0443"},{name:"Label",value:"\u0413\u043E\u0442\u043E\u0432\u0430 \u0432\u0456\u043A\u0442\u043E\u0440\u0438\u043D\u0430"},{name:"Items",value:this._commandService.commands.map(G=>G.quiz)},{name:"Clearable",value:!0}]},{name:"Text",key:"name",focused:!0,fields:[{name:"Placeholder",value:"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043D\u0430\u0437\u0432\u0443 \u0432\u0456\u043A\u0442\u043E\u0440\u0438\u043D\u0438..."},{name:"Label",value:"\u041D\u0430\u0437\u0432\u0430 \u0432\u0456\u043A\u0442\u043E\u0440\u0438\u043D\u0438"}]},{name:"Text",key:"description",fields:[{name:"Placeholder",value:"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0437\u0430\u0432\u0434\u0430\u043D\u043D\u044F \u0432\u0456\u043A\u0442\u043E\u0440\u0438\u043D\u0438..."},{name:"Label",value:"\u0417\u0430\u0432\u0434\u0430\u043D\u043D\u044F \u0432\u0456\u043A\u0442\u043E\u0440\u0438\u043D\u0438"}]}]})}load(t){t?this._quizService.get({query:"class="+t}).subscribe(n=>{this.quizzes=n}):this.quizzes=[]}add(){this._quizCreationForm.components[1].hidden=!1,this._quizCreationForm.components[2].hidden=!1,this._form.modal(this._quizCreationForm,{label:"\u0421\u0442\u0432\u043E\u0440\u0438\u0442\u0438",click:(t,n)=>z(this,null,function*(){n();let o=t;this._quizService.create(o.quiz?{name:"\u0417\u0430\u0432\u0434\u0430\u043D\u043D\u044F \u0432\u0456\u043A\u0442\u043E\u0440\u0438\u043D\u0438 \xAB"+this._commandService.commands[this._commandService.commands.findIndex(a=>a.quiz===o.quiz)].name+"\xBB",description:o.quiz,class:this.classService.classId}:h(v({},o),{class:this.classService.classId})).subscribe(a=>{this._router.navigateByUrl("/quiz/"+a._id)})})},{},t=>{this._quizCreationForm.components[1].hidden=!!t.quiz,this._quizCreationForm.components[2].hidden=!!t.quiz})}};e.\u0275fac=function(n){return new(n||e)(s(N),s(V),s(B),s(D),s(Q))},e.\u0275cmp=b({type:e,selectors:[["ng-component"]],standalone:!1,decls:4,vars:1,consts:[[1,"group-item",3,"wChange"],[1,"w-btn","_green","mb15"],[1,"code-item",3,"routerLink"],[1,"w-btn","_green","mb15",3,"click"],[1,"documents__title"],[3,"innerHtml",4,"ngIf"],[3,"innerHtml"]],template:function(n,o){n&1&&(u(0,"core-class",0),p("wChange",function(d){return o.load(d)}),m(),I(1,K,2,0,"button",1),w(2,W,4,5,"div",2,k)),n&2&&(c(),F(o.classService.mineClass?1:-1),c(),T(o.quizzes))},dependencies:[U,M,P],encapsulation:2});let i=e;return i})();var X=[{path:"",component:A}],le=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=x({type:e}),e.\u0275inj=C({imports:[$.forChild(X),R]});let i=e;return i})();export{le as QuizzesModule};
